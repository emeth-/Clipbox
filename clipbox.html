<html>
<head>
    <script src="md5.js"></script>
    <script>
    function htmlEscape(str)
    {
        return String(str)
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
    }
    function clipbox(data)
    {
        /*
         data = [{"meta": "for p in pasteL... (248 chars)", "type": "text", "id": "2012-01-14_17-20-18OZJU83", "time": 1326561618},
                    {"meta": "217x111 pixels (5.0K)", "type": "image", "id": "AZPQU0_2012-01-14_17-20-35AWVVBV.png", "time": 1326561635}]
        */
        tbodyHtml = "";
        for (d in data)
        {
            var retURL = "http://dl.dropbox.com/u/"+document.getElementById('dbid').value+"/.clipbox/"+data[d]['id'];
            tbodyHtml += "<tr><td>"+data[d]['type']+"</td><td>"+data[d]['id']+"</td><td>"+htmlEscape(data[d]['meta'])+"</td><td>"+data[d]['time']+"</td><td><a target='_blank' href='"+retURL+"'>Retrieve</a></td></tr>";
        }
        document.getElementById('plist').innerHTML = tbodyHtml;
    }
    function doit()
    {
        //login
        var url = "http://dl.dropbox.com/u/"+document.getElementById('dbid').value+"/.clipbox/."+md5('Royale.'+document.getElementById('password').value)
        var head = document.getElementsByTagName("head")[0];
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = url;
        head.appendChild(script);
    }
    </script>
</head>
<body>
Password: <input type='password' id='password' value='blue42'><br />
Dropbox ID: <input type='text' id='dbid' value='4238738'><br />
<input type='button' onclick='doit()' value='submit'><br /><br />
    <table>
        <thead>
              <tr><th>Type</th><th>ID</th><th>Meta</th><th>Time</th><th>Retrieve</th></tr>
        </thead>
        <tbody id='plist'>
            
        </tbody>
    </table>
</body>
</html>